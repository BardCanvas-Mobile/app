
<!--                        -->
<!-- Feed service container -->
<!--                        -->

<template data-type="feed-service-container">
    
    <div class="feed-cards-wrapper">
        
        <div class="pull-to-refresh-layer">
            <div class="preloader"></div>
            <div class="pull-to-refresh-arrow"></div>
        </div>
        
        <div id="%s" class="bc-service-feed" data-feed-type="%s"></div>
        
        <div class="bc-feed-refresher infinite-scroll-preloader" align="center" style="display: none">
            <div class="preloader"></div>
        </div>
        
    </div>
    
</template>

<!--                     -->
<!-- Simple cards markup -->
<!--                     -->

<template data-type="cards:simple">
    
    <div class="card bc-feed-item item-data-container bc-actions-parent"
         data-item-type="{{item.type}}" data-item-id="{{item.id}}"
         data-publishing-date="{{item.publishing_date}}">
        
        <div class="card-header">
            <a class="title">{{item.title}}</a>
        </div>
        
        <div class="card-content">
            <div class="card-content-inner">
                
                <p>{{item.excerpt}}</p>
                
                <p class="color-gray">
                    <span class="publishing-date">
                        {{item._publishedCaption}}
                        {{#if item._showCategoryLabel}}
                            <span class="main-category-title nowrap">
                                <span class="fa fa-folder"></span>
                                {{item._mainCategoryCaption}}
                            </span>
                        {{/if}}
                    </span>
                </p>
                
                {{#item.excerpt_extra_blocks}}
                    {{#if title}}
                        <div class="content-block-title">{{title}}</div>
                    {{/if}}
                    <div class="extra-content {{class}}">
                        {{contents}}
                    </div>
                {{/item.excerpt_extra_blocks}}
                
                {{#if service.options.showsCommentsOnIndex}}
                    {{#if item._hasComments}}
                        <ul class="comments">
                            {{#item._commentsForIndex}}
                                <li>
                                    <span class="user-name">{{author_display_name}}</span>
                                    <span class="comment-date bc-bracketed convert-to-timeago-date timeago"
                                          data-raw-date="{{creation_date}} {{../manifest.timezoneOffset}}">{{creation_date}}</span>
                                    <span class="excerpt">{{excerpt}}</span>
                                </li>
                            {{/item._commentsForIndex}}
                        </ul>
                    {{/if}}
                {{/if}}
                
            </div>
        </div>
        
        {{#if item.has_index_actions}}
            <div class="card-footer bc-actions-row">
                {{#item.index_action_triggers}}
                    <a class="link bc-action-trigger {{class}}" onclick="BCapp.triggerAction(this)">
                        <template class="bc-action-data">{{js "JSON.stringify(this)"}}</template>
                        <i class="fa {{icon}} fa-lg"></i> {{caption}}
                    </a>
                {{/item.index_action_triggers}}
            </div>
        {{/if}}
        
    </div>
    
</template>

<!--                       -->
<!-- "Modern" cards markup -->
<!--                       -->

<template data-type="cards:modern">
    
    <div class="card modern bc-feed-item item-data-container bc-actions-parent"
         data-item-type="{{item.type}}" data-item-id="{{item.id}}"
         data-publishing-date="{{item.publishing_date}}">
        
        {{#if item.featured_image_path}}
            <div class="card-header no-border" valign="bottom" style="background-image: url('{{item.featured_image_path}}')">
                <div class="title">{{item.title}}</div>
            </div>
        {{else}}
            <div class="card-header no-border no-background" valign="bottom">
                <a class="title">{{item.title}}</a>
            </div>
        {{/if}}
        
        <div class="card-content">
            <div class="card-content-inner">
                
                <p class="color-gray">
                    <span class="publishing-date">
                        {{item._publishedCaption}}
                        {{#if item._showCategoryLabel}}
                            <span class="main-category-title nowrap">
                                <span class="fa fa-folder"></span>
                                {{item._mainCategoryCaption}}
                            </span>
                        {{/if}}
                    </span>
                </p>
                
                <p>{{item.excerpt}}</p>
                
                {{#item.excerpt_extra_blocks}}
                    {{#if title}}
                        <div class="content-block-title">{{title}}</div>
                    {{/if}}
                    <div class="extra-content {{class}}">
                        {{contents}}
                    </div>
                {{/item.excerpt_extra_blocks}}
                
                {{#if service.options.showsCommentsOnIndex}}
                    {{#if item._hasComments}}
                        <ul class="comments">
                            {{#item._commentsForIndex}}
                                <li>
                                    <span class="user-name">{{author_display_name}}</span>
                                    <span class="comment-date bc-bracketed convert-to-timeago-date timeago"
                                          data-raw-date="{{creation_date}} {{../manifest.timezoneOffset}}">{{creation_date}}</span>
                                    <span class="excerpt">{{excerpt}}</span>
                                </li>
                            {{/item._commentsForIndex}}
                        </ul>
                    {{/if}}
                {{/if}}
                
            </div>
        </div>
        
        {{#if item.has_index_actions}}
            <div class="card-footer bc-actions-row">
                {{#item.index_action_triggers}}
                    <a class="link bc-action-trigger {{class}}" onclick="BCapp.triggerAction(this)">
                        <template class="bc-action-data">{{js "JSON.stringify(this)"}}</template>
                        <i class="fa {{icon}} fa-lg"></i> {{caption}}
                    </a>
                {{/item.index_action_triggers}}
            </div>
        {{/if}}
        
    </div>
    
</template>

<!--                      -->
<!-- Facebook style cards -->
<!--                      -->

<template data-type="cards:facebook">
    
    <div class="card facebook bc-feed-item item-data-container bc-actions-parent"
         data-item-type="{{item.type}}" data-item-id="{{item.id}}"
         data-publishing-date="{{item.publishing_date}}">
        
        {{#if service.options.showAuthors}}
            <div class="card-header item-meta">
                <span class="user-avatar"><img src="{{item.author_avatar}}"></span>
                <span class="user-name">{{item.author_display_name}}</span>
                <span class="publishing-date">{{item._altPublishedCaption}}</span>
            </div>
        {{else}}
            <div class="card-header">
                <span class="publishing-date">{{item._altPublishedCaption}}</span>
            </div>
        {{/if}}
        
        <div class="card-content">
            <div class="card-content-inner">
                
                <p>
                    {{#if item._showCategoryLabel}}
                        <span class="main-category-title nowrap color-gray pull-right">
                            <span class="fa fa-folder"></span>
                            {{item._mainCategoryCaption}}
                        </span>
                    {{/if}}
                    <a>{{item.title}}</a>
                </p>
                
                {{#if item.featured_image_path}}
                    <img src="{{item.featured_image_path}}" width="100%">
                {{/if}}
                
                <p>{{item.excerpt}}</p>
                
                {{#item.excerpt_extra_blocks}}
                    {{#if title}}
                        <div class="content-block-title">{{title}}</div>
                    {{/if}}
                    <div class="extra-content {{class}}">
                        {{contents}}
                    </div>
                {{/item.excerpt_extra_blocks}}
                
                {{#if service.options.showsCommentsOnIndex}}
                    {{#if item._hasComments}}
                        <ul class="comments">
                            {{#item._commentsForIndex}}
                                <li>
                                    <span class="user-name">{{author_display_name}}</span>
                                    <span class="comment-date bc-bracketed convert-to-timeago-date timeago"
                                          data-raw-date="{{creation_date}} {{../manifest.timezoneOffset}}">{{creation_date}}</span>
                                    <span class="excerpt">{{excerpt}}</span>
                                </li>
                            {{/item._commentsForIndex}}
                        </ul>
                    {{/if}}
                {{/if}}
                
            </div>
        </div>
        
        {{#if item.has_index_actions}}
            <div class="card-footer bc-actions-row">
                {{#item.index_action_triggers}}
                    <a class="link bc-action-trigger {{class}}" onclick="BCapp.triggerAction(this)">
                        <template class="bc-action-data">{{js "JSON.stringify(this)"}}</template>
                        <i class="fa {{icon}} fa-lg"></i> {{caption}}
                    </a>
                {{/item.index_action_triggers}}
            </div>
        {{/if}}
        
    </div>
    
</template>

<!--                -->
<!-- Todo: this one -->
<!--                -->

<template data-type="media_list">
    
    <li>
        <a class="item-link item-content">
            <div class="item-inner">
                <div class="item-title-row">
                    <div class="item-title">Facebook</div>
                    <div class="item-after">17:14</div>
                </div>
                <div class="item-subtitle">New messages from John Doe</div>
                <div class="item-text">Lorem ipsum dolor sit amet...</div>
            </div>
        </a>
    </li>
    
</template>

<!--                -->
<!-- Todo: This one -->
<!--                -->

<template data-type="card reddit">
    
</template>

<!--                  -->
<!-- Single item page -->
<!--                  -->

<template data-type="single_item_page">
    
    <div class="page" data-page="{{feedPageId}}">
        
        <div class="navbar">
            <div class="navbar-inner">
                <div class="left">
                    <a class="link back">
                        <i class="bc-ios-icon icon f7-icons">chevron_left</i>
                        <i class="bc-android-icon fa fa-chevron-left"></i>
                        {{@global.language.actions.back}}
                    </a>
                </div>
                <div class="center">
                    {{item.title}}
                </div>
                <div class="right">
                    <a class="link icon-only" disabled>
                        <i class="bc-ios-icon icon f7-icons">share</i>
                        <i class="bc-android-icon fa fa-share"></i>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="page-content inner-navbar-fixed">
            
            <div class="inner-page-content">
                <article class="item-data-container">
                    
                    {{#if item.has_featured_image}}
                        {{#if item.featured_image_not_in_contents}}
                            <div class="featured_image" style="background-image: url('{{item.featured_image_thumbnail}}')"></div>
                        {{/if}}
                    {{/if}}
                    
                    {{#if service.options.showAuthors}}
                        <div class="content-block">
                            <h1>{{item.title}}</h1>
                            <div class="item-meta">
                                <span class="user-avatar"><img src="{{item.author_avatar}}"></span>
                                <span class="user-name">{{item.author_display_name}} ({{item._levelOnlyCaption}})</span>
                                <span class="publishing-date">{{item._altPublishedCaption}}</span>
                            </div>
                        </div>
                    {{else}}
                        <div class="content-block">
                            <h1>{{item.title}}</h1>
                            <span class="publishing-date">{{item._altPublishedCaption}}</span>
                        </div>
                    {{/if}}
                    
                    <div class="content-block main-content">
                        {{item.content}}
                    </div>
                    
                    {{#item.extra_content_blocks}}
                        {{#if title}}
                            <div class="content-block-title">{{title}}</div>
                        {{/if}}
                        <div class="content-block extra-content {{class}}">
                            {{contents}}
                        </div>
                    {{/item.extra_content_blocks}}
                    
                    {{#if item._hasComments}}
                        <div class="content-block-title">{{item.comments_count}} {{@global.language.comments}}</div>
                        <div class="content-block extra-content bc-indented-list">
                            
                            {{#item.comments}}
                                <div class="bc-indented-entry indent-{{indent_level}} bc-item-comment bc-actions-parent"
                                     data-parent-item-type="{{../type}}" data-parent-item-id="{{../id}}" data-comment-id="{{id}}">
                                    
                                    <div class="content-block-inner comment-entry">
                                        <div class="item-meta">
                                            <span class="user-avatar"><img src="{{author_avatar}}"></span>
                                            <span class="user-name">{{comment_reply_path}}</span>
                                            <span class="publishing-date convert-to-full-date">{{creation_date}}</span>
                                        </div>
                                        <div class="item-content">
                                            
                                            {{content}}
                                            
                                            {{#extra_content_blocks}}
                                                {{#if title}}
                                                    <div class="content-block-title">{{title}}</div>
                                                {{/if}}
                                                <div class="content-block extra-content {{class}}">
                                                    {{contents}}
                                                </div>
                                            {{/extra_content_blocks}}
                                            
                                            {{#if has_actions}}
                                                <p class="bc-actions-row">
                                                    {{#action_triggers}}
                                                        <a class="link bc-action-trigger {{class}}" onclick="BCapp.triggerAction(this)">
                                                            <template class="bc-action-data">{{js "JSON.stringify(this)"}}</template>
                                                            <i class="fa {{icon}} fa-lg"></i> {{caption}}
                                                        </a>
                                                    {{/action_triggers}}
                                                </p>
                                            {{/if}}
                                            
                                        </div>
                                    </div>
                                    
                                </div>
                            {{/item.comments}}
                            
                        </div>
                    {{/if}}
                    
                </article>
            </div>
            
        </div><!-- /.page-content -->
    </div><!-- /.page -->
    
</template>
